From: Chris Lamb <lamby@debian.org>
Date: Wed, 14 Aug 2019 10:16:24 -0700
Subject: Prevent a FTBFS by updating the tests to accommodate an updated
 GnuPG in stretch now producing a different output. (Closes: #934034)

---
 tests/keytrans | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

diff --git a/tests/keytrans b/tests/keytrans
index fd9a144..5b23a16 100755
--- a/tests/keytrans
+++ b/tests/keytrans
@@ -137,9 +137,9 @@ gpg --list-keys
 cat >"$TEMPDIR"/expectedout <<EOF
 pub:u:1024:1:$KEYID:$timestamp:::u:::scSC
 uid:u::::$timestamp::E90EC72E68C6C2A0751DADC70F54F60D27B88C3D::monkeymonkey
-sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x:::::8
+sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x::$KEYFPR:::8
 uid:u::::$timestamp::8200BD0425CC70C7D698DF3FE412044EAAB83F94::testtest
-sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x:::::8
+sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x::$KEYFPR:::8
 EOF
 
 diff -u "$TEMPDIR"/expectedout <(gpg --check-sigs --with-colons | grep -vE '^(tru|fpr):' | sed 's/:*$//')
@@ -165,10 +165,10 @@ gpg --list-keys
 cat >"$TEMPDIR"/expectedout <<EOF
 pub:u:1024:1:$KEYID:$timestamp:::u:::scSC
 uid:u::::$timestamp::E90EC72E68C6C2A0751DADC70F54F60D27B88C3D::monkeymonkey
-sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x:::::8
+sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x::$KEYFPR:::8
 uid:r::::::8200BD0425CC70C7D698DF3FE412044EAAB83F94::testtest
-sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x:::::8
-rev:!::1:$KEYID:$revtime::::monkeymonkey:30x:::::8
+sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x::$KEYFPR:::8
+rev:!::1:$KEYID:$revtime::::monkeymonkey:30x::$KEYFPR:::8
 EOF
 
 
@@ -196,15 +196,15 @@ PEM2OPENPGP_TIMESTAMP="$timestamp" \
 cat >"$TEMPDIR"/expectedout <<EOF
 pub:u:1024:1:$KEYID:$timestamp:::u:::scSC
 uid:u::::$timestamp::E90EC72E68C6C2A0751DADC70F54F60D27B88C3D::monkeymonkey
-sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x:::::8
+sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x::$KEYFPR:::8
 uid:r::::::8200BD0425CC70C7D698DF3FE412044EAAB83F94::testtest
-sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x:::::8
-rev:!::1:$KEYID:$revtime::::monkeymonkey:30x:::::8
+sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x::$KEYFPR:::8
+rev:!::1:$KEYID:$revtime::::monkeymonkey:30x::$KEYFPR:::8
 uid:u::::$timestamp::EDDC32D783E7F4C7B6982D9AE5DC4A61000648BA::baz
-sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x:::::8
+sig:!::1:$KEYID:$timestamp::::monkeymonkey:13x::$KEYFPR:::8
 pub:-:1024:1:$NEWKEYID:$(($timestamp + 1)):::-:::caCA
 uid:-::::$(($timestamp + 1))::A0D708F51CC257DEFC01AEDE1E0A5F329DFD8F16::fubar
-sig:!::1:$NEWKEYID:$(($timestamp + 1))::::fubar:13x:::::8
+sig:!::1:$NEWKEYID:$(($timestamp + 1))::::fubar:13x::$NEWKEYFPR:::8
 EOF
 
 echo "test: diff expected gpg list output"
